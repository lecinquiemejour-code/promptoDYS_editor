{"ast":null,"code":"import React,{useCallback,useEffect}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Editor=_ref=>{let{viewMode,content,editorRef,onInput,onSelectionChange,currentFormat}=_ref;// Gestionnaire pour l'auto-redimensionnement (toujours déclaré)\nconst handleTextareaResize=useCallback(textarea=>{if(textarea){textarea.style.height='auto';textarea.style.height=Math.max(384,textarea.scrollHeight)+'px';}},[]);// Gestionnaire unifié pour tous les changements\nconst handleChange=useCallback(e=>{if(viewMode==='wysiwyg'&&editorRef.current){// Nettoyer les spans vides et les &nbsp; en trop\nconst cleanContent=html=>{return html.replace(/<span(?![^>]*style=\"[^\"]*color:)[^>]*>\\s*<\\/span>/g,'')// Supprimer spans vides SAUF les spans colorés\n.replace(/(&nbsp;\\s*){2,}/g,'&nbsp;')// Réduire les &nbsp; multiples\n.replace(/<font[^>]*color=\"([^\"]*)\"[^>]*>(.*?)<\\/font>/g,'<span style=\"color: $1;\">$2</span>')// Convertir font en span\n.replace(/<b\\b[^>]*>(.*?)<\\/b>/g,'<strong>$1</strong>')// Convertir b en strong\n.replace(/<i\\b[^>]*>(.*?)<\\/i>/g,'<em>$1</em>');// Convertir i en em\n};const newContent=cleanContent(editorRef.current.innerHTML);// Éviter les boucles infinies avec une vérification plus stricte\nif(newContent!==content&&newContent.trim()!==content.trim()){onInput({target:{innerHTML:newContent,value:newContent}});}// Re-rendre MathJax après modification du contenu\nif(window.MathJax&&window.MathJax.typesetPromise){window.MathJax.typesetPromise([editorRef.current]).catch(err=>{console.warn('Erreur MathJax:',err);});}// Mettre à jour l'état de formatage avec un délai pour éviter les conflits\nrequestAnimationFrame(()=>{if(document.activeElement===editorRef.current){onSelectionChange();}});}},[viewMode,editorRef,onInput,onSelectionChange,content]);// Gestionnaire pour les événements de sélection/curseur\nconst handleSelectionChange=useCallback(()=>{if(viewMode==='wysiwyg'&&document.activeElement===editorRef.current){onSelectionChange();}// eslint-disable-next-line react-hooks/exhaustive-deps\n},[viewMode,onSelectionChange]);// Initialiser le contenu uniquement si nécessaire\nuseEffect(()=>{if(viewMode==='wysiwyg'&&editorRef.current&&editorRef.current.innerHTML!==content){// Ne pas modifier le contenu si l'utilisateur interagit activement\nconst hasFocus=document.activeElement===editorRef.current;const hasSelection=window.getSelection().rangeCount>0;// Éviter les mises à jour pendant l'interaction utilisateur\nif(hasFocus&&hasSelection){return;// Ne pas perturber l'utilisateur\n}// Mise à jour simple sans restauration de curseur\neditorRef.current.innerHTML=content;// Re-rendre MathJax après mise à jour du contenu\nif(window.MathJax&&window.MathJax.typesetPromise){window.MathJax.typesetPromise([editorRef.current]).catch(err=>{console.warn('Erreur MathJax:',err);});}}// eslint-disable-next-line react-hooks/exhaustive-deps\n},[viewMode,content]);// Gestionnaire pour la copie - convertir HTML en texte propre\nconst handleCopy=useCallback(e=>{if(viewMode==='wysiwyg'&&editorRef.current){const selection=window.getSelection();if(selection.rangeCount>0){const range=selection.getRangeAt(0);const selectedContent=range.cloneContents();const tempDiv=document.createElement('div');tempDiv.appendChild(selectedContent);// Convertir HTML en texte avec retours à la ligne préservés\nconst htmlContent=tempDiv.innerHTML;const textContent=htmlContent.replace(/<div[^>]*>/gi,'').replace(/<\\/div>/gi,'\\n').replace(/<br\\s*\\/?>/gi,'\\n').replace(/<p[^>]*>/gi,'').replace(/<\\/p>/gi,'\\n').replace(/<[^>]+>/g,'')// Supprimer toutes les autres balises\n.replace(/&nbsp;/g,' ').replace(/&amp;/g,'&').replace(/&lt;/g,'<').replace(/&gt;/g,'>').replace(/&quot;/g,'\"').replace(/&#39;/g,\"'\").replace(/\\n+$/,'');// Supprimer les retours à la ligne en fin\n// Mettre le texte propre dans le presse-papier\ne.clipboardData.setData('text/plain',textContent);e.preventDefault();}}// eslint-disable-next-line react-hooks/exhaustive-deps\n},[viewMode]);// Écouter les changements de sélection et la copie\nuseEffect(()=>{if(viewMode==='wysiwyg'){var _editorRef$current;document.addEventListener('selectionchange',handleSelectionChange);(_editorRef$current=editorRef.current)===null||_editorRef$current===void 0?void 0:_editorRef$current.addEventListener('copy',handleCopy);return()=>{var _editorRef$current2;document.removeEventListener('selectionchange',handleSelectionChange);(_editorRef$current2=editorRef.current)===null||_editorRef$current2===void 0?void 0:_editorRef$current2.removeEventListener('copy',handleCopy);};}// eslint-disable-next-line react-hooks/exhaustive-deps\n},[viewMode,handleSelectionChange,handleCopy]);// Effect pour redimensionner au changement de contenu (toujours déclaré)\nuseEffect(()=>{if(viewMode!=='wysiwyg'&&editorRef.current){handleTextareaResize(editorRef.current);}// eslint-disable-next-line react-hooks/exhaustive-deps\n},[content,viewMode,handleTextareaResize]);// Vue WYSIWYG\nif(viewMode==='wysiwyg'){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"style\",{children:\"\\n          .editor-content h1 { \\n            font-size: 2em; \\n            font-weight: bold; \\n            margin: 0.67em 0; \\n            line-height: 1.2;\\n          }\\n          .editor-content h2 { \\n            font-size: 1.5em; \\n            font-weight: bold; \\n            margin: 0.75em 0; \\n            line-height: 1.3;\\n          }\\n          .editor-content h3 { \\n            font-size: 1.17em; \\n            font-weight: bold; \\n            margin: 0.83em 0; \\n            line-height: 1.4;\\n          }\\n          .editor-content p {\\n            margin: 0.5em 0;\\n          }\\n          .editor-content ul {\\n            margin: 0.5em 0;\\n            padding-left: 2em;\\n            list-style-type: disc;\\n          }\\n          .editor-content ol {\\n            margin: 0.5em 0;\\n            padding-left: 2em;\\n            list-style-type: decimal;\\n          }\\n          .editor-content ol[style*=\\\"lower-alpha\\\"] {\\n            list-style-type: lower-alpha;\\n          }\\n          .editor-content li {\\n            margin: 0.25em 0;\\n          }\\n        \"}),/*#__PURE__*/_jsx(\"div\",{ref:editorRef,contentEditable:true,spellCheck:false,onInput:handleChange,suppressContentEditableWarning:true,className:\"editor-content p-2 focus:outline-none h-full\",style:{fontFamily:'var(--dys-font-family)',fontSize:'var(--dys-font-size)',lineHeight:'var(--dys-line-height)',color:'var(--dys-text-color)',backgroundColor:'var(--dys-bg-color)',overflow:'auto',wordWrap:'break-word',whiteSpace:'pre-wrap',border:'1px solid #e5e7eb'}})]});}// Vue Markdown\nif(viewMode==='markdown'){return/*#__PURE__*/_jsx(\"textarea\",{ref:el=>{editorRef.current=el;},value:content,onChange:e=>{onInput(e);},className:\"w-full h-full p-2 focus:outline-none resize-none\",style:{fontFamily:'var(--dys-font-family)',fontSize:'var(--dys-font-size)',lineHeight:'var(--dys-line-height)',color:'var(--dys-text-color)',backgroundColor:'var(--dys-bg-color)',overflow:'auto',wordWrap:'break-word',whiteSpace:'pre-wrap',border:'1px solid #e5e7eb'},placeholder:\"\\xC9crivez en Markdown... # Titre 1\\n## Titre 2\\n### Titre 3 **Gras** *Italique* - Liste \\xE0 puces\\n1. Liste num\\xE9rot\\xE9e\\na. Liste alphab\\xE9tique $E = mc^2$ (formule inline)\\n$$\\\\\\\\int_{-\\\\\\\\infty}^{\\\\\\\\infty} e^{-x^2} dx = \\\\\\\\sqrt{\\\\\\\\pi}$$ (formule block)\"});}// Fonction pour formater le HTML avec des retours à la ligne et indentation\nconst formatHtmlForSource=html=>{let indentLevel=0;const indentSize=2;// 2 espaces par niveau\nreturn html.replace(/<br\\s*\\/?>/gi,'<br>\\n').replace(/<\\/?(h[1-6]|p|div|ul|ol|li|strong|em|span)[^>]*>/gi,match=>{if(match.startsWith('</')){// Balise fermante : diminuer l'indentation puis ajouter la balise\nindentLevel=Math.max(0,indentLevel-1);return match+'\\n';}else{// Balise ouvrante : ajouter la balise puis augmenter l'indentation\nconst result='\\n'+' '.repeat(indentLevel*indentSize)+match;// Augmenter l'indentation pour les balises conteneurs\nif(match.match(/<(ul|ol|li|div|p|h[1-6])[^>]*>/i)){indentLevel++;}return result;}}).split('\\n').map((line,index)=>{if(index===0)return line.trim();// Première ligne sans indentation\nif(line.trim()==='')return'';// Ligne vide\nif(line.trim().startsWith('</')){// Balise fermante : réduire l'indentation\nconst currentIndent=Math.max(0,indentLevel-1);return' '.repeat(currentIndent*indentSize)+line.trim();}// Contenu texte : utiliser l'indentation actuelle\nreturn line.startsWith(' ')?line:' '.repeat(indentLevel*indentSize)+line.trim();}).join('\\n').replace(/^\\n+/,'')// Supprimer les retours à la ligne en début\n.replace(/\\n{2,}/g,'\\n')// Supprimer toutes les lignes vides multiples\n.trim();};// Vue HTML (par défaut)\nreturn/*#__PURE__*/_jsx(\"textarea\",{ref:el=>{editorRef.current=el;},value:formatHtmlForSource(content),onChange:e=>{onInput(e);},className:\"w-full h-full p-2 focus:outline-none resize-none\",style:{fontFamily:'Monaco, \"Cascadia Code\", \"Roboto Mono\", monospace',overflow:'auto',wordWrap:'break-word',whiteSpace:'pre-wrap',border:'1px solid #e5e7eb'},placeholder:\"Code source HTML...\"});};export default Editor;","map":{"version":3,"names":["React","useCallback","useEffect","jsx","_jsx","jsxs","_jsxs","Editor","_ref","viewMode","content","editorRef","onInput","onSelectionChange","currentFormat","handleTextareaResize","textarea","style","height","Math","max","scrollHeight","handleChange","e","current","cleanContent","html","replace","newContent","innerHTML","trim","target","value","window","MathJax","typesetPromise","catch","err","console","warn","requestAnimationFrame","document","activeElement","handleSelectionChange","hasFocus","hasSelection","getSelection","rangeCount","handleCopy","selection","range","getRangeAt","selectedContent","cloneContents","tempDiv","createElement","appendChild","htmlContent","textContent","clipboardData","setData","preventDefault","_editorRef$current","addEventListener","_editorRef$current2","removeEventListener","children","ref","contentEditable","spellCheck","suppressContentEditableWarning","className","fontFamily","fontSize","lineHeight","color","backgroundColor","overflow","wordWrap","whiteSpace","border","el","onChange","placeholder","formatHtmlForSource","indentLevel","indentSize","match","startsWith","result","repeat","split","map","line","index","currentIndent","join"],"sources":["C:/Users/JEAN-NOELLEFEBVRE-SA/CascadeProjects/editor/src/components/Editor.js"],"sourcesContent":["import React, { useCallback, useEffect } from 'react';\n\nconst Editor = ({ \n  viewMode,  \n  content, \n  editorRef, \n  onInput, \n  onSelectionChange,\n  currentFormat\n}) => {\n  \n  // Gestionnaire pour l'auto-redimensionnement (toujours déclaré)\n  const handleTextareaResize = useCallback((textarea) => {\n    if (textarea) {\n      textarea.style.height = 'auto';\n      textarea.style.height = Math.max(384, textarea.scrollHeight) + 'px';\n    }\n  }, []);\n\n  // Gestionnaire unifié pour tous les changements\n  const handleChange = useCallback((e) => {\n    if (viewMode === 'wysiwyg' && editorRef.current) {\n      // Nettoyer les spans vides et les &nbsp; en trop\n      const cleanContent = (html) => {\n        return html\n          .replace(/<span(?![^>]*style=\"[^\"]*color:)[^>]*>\\s*<\\/span>/g, '') // Supprimer spans vides SAUF les spans colorés\n          .replace(/(&nbsp;\\s*){2,}/g, '&nbsp;') // Réduire les &nbsp; multiples\n          .replace(/<font[^>]*color=\"([^\"]*)\"[^>]*>(.*?)<\\/font>/g, '<span style=\"color: $1;\">$2</span>') // Convertir font en span\n          .replace(/<b\\b[^>]*>(.*?)<\\/b>/g, '<strong>$1</strong>') // Convertir b en strong\n          .replace(/<i\\b[^>]*>(.*?)<\\/i>/g, '<em>$1</em>'); // Convertir i en em\n      };\n      \n      const newContent = cleanContent(editorRef.current.innerHTML);\n      \n      // Éviter les boucles infinies avec une vérification plus stricte\n      if (newContent !== content && newContent.trim() !== content.trim()) {\n        onInput({ target: { innerHTML: newContent, value: newContent } });\n      }\n      \n      // Re-rendre MathJax après modification du contenu\n      if (window.MathJax && window.MathJax.typesetPromise) {\n        window.MathJax.typesetPromise([editorRef.current]).catch((err) => {\n          console.warn('Erreur MathJax:', err);\n        });\n      }\n      \n      // Mettre à jour l'état de formatage avec un délai pour éviter les conflits\n      requestAnimationFrame(() => {\n        if (document.activeElement === editorRef.current) {\n          onSelectionChange();\n        }\n      });\n    }\n  }, [viewMode, editorRef, onInput, onSelectionChange, content]);\n\n  // Gestionnaire pour les événements de sélection/curseur\n  const handleSelectionChange = useCallback(() => {\n    if (viewMode === 'wysiwyg' && document.activeElement === editorRef.current) {\n      onSelectionChange();\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [viewMode, onSelectionChange]);\n\n  // Initialiser le contenu uniquement si nécessaire\n  useEffect(() => {\n    if (viewMode === 'wysiwyg' && editorRef.current && editorRef.current.innerHTML !== content) {\n      // Ne pas modifier le contenu si l'utilisateur interagit activement\n      const hasFocus = document.activeElement === editorRef.current;\n      const hasSelection = window.getSelection().rangeCount > 0;\n      \n      // Éviter les mises à jour pendant l'interaction utilisateur\n      if (hasFocus && hasSelection) {\n        return; // Ne pas perturber l'utilisateur\n      }\n      \n      // Mise à jour simple sans restauration de curseur\n      editorRef.current.innerHTML = content;\n      \n      // Re-rendre MathJax après mise à jour du contenu\n      if (window.MathJax && window.MathJax.typesetPromise) {\n        window.MathJax.typesetPromise([editorRef.current]).catch((err) => {\n          console.warn('Erreur MathJax:', err);\n        });\n      }\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [viewMode, content]);\n\n  // Gestionnaire pour la copie - convertir HTML en texte propre\n  const handleCopy = useCallback((e) => {\n    if (viewMode === 'wysiwyg' && editorRef.current) {\n      const selection = window.getSelection();\n      if (selection.rangeCount > 0) {\n        const range = selection.getRangeAt(0);\n        const selectedContent = range.cloneContents();\n        const tempDiv = document.createElement('div');\n        tempDiv.appendChild(selectedContent);\n        \n        // Convertir HTML en texte avec retours à la ligne préservés\n        const htmlContent = tempDiv.innerHTML;\n        const textContent = htmlContent\n          .replace(/<div[^>]*>/gi, '')\n          .replace(/<\\/div>/gi, '\\n')\n          .replace(/<br\\s*\\/?>/gi, '\\n')\n          .replace(/<p[^>]*>/gi, '')\n          .replace(/<\\/p>/gi, '\\n')\n          .replace(/<[^>]+>/g, '') // Supprimer toutes les autres balises\n          .replace(/&nbsp;/g, ' ')\n          .replace(/&amp;/g, '&')\n          .replace(/&lt;/g, '<')\n          .replace(/&gt;/g, '>')\n          .replace(/&quot;/g, '\"')\n          .replace(/&#39;/g, \"'\")\n          .replace(/\\n+$/, ''); // Supprimer les retours à la ligne en fin\n        \n        // Mettre le texte propre dans le presse-papier\n        e.clipboardData.setData('text/plain', textContent);\n        e.preventDefault();\n      }\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [viewMode]);\n\n  // Écouter les changements de sélection et la copie\n  useEffect(() => {\n    if (viewMode === 'wysiwyg') {\n      document.addEventListener('selectionchange', handleSelectionChange);\n      editorRef.current?.addEventListener('copy', handleCopy);\n      \n      return () => {\n        document.removeEventListener('selectionchange', handleSelectionChange);\n        editorRef.current?.removeEventListener('copy', handleCopy);\n      };\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [viewMode, handleSelectionChange, handleCopy]);\n\n  // Effect pour redimensionner au changement de contenu (toujours déclaré)\n  useEffect(() => {\n    if (viewMode !== 'wysiwyg' && editorRef.current) {\n      handleTextareaResize(editorRef.current);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [content, viewMode, handleTextareaResize]);\n\n  // Vue WYSIWYG\n  if (viewMode === 'wysiwyg') {\n    return (\n      <div>\n        <style>{`\n          .editor-content h1 { \n            font-size: 2em; \n            font-weight: bold; \n            margin: 0.67em 0; \n            line-height: 1.2;\n          }\n          .editor-content h2 { \n            font-size: 1.5em; \n            font-weight: bold; \n            margin: 0.75em 0; \n            line-height: 1.3;\n          }\n          .editor-content h3 { \n            font-size: 1.17em; \n            font-weight: bold; \n            margin: 0.83em 0; \n            line-height: 1.4;\n          }\n          .editor-content p {\n            margin: 0.5em 0;\n          }\n          .editor-content ul {\n            margin: 0.5em 0;\n            padding-left: 2em;\n            list-style-type: disc;\n          }\n          .editor-content ol {\n            margin: 0.5em 0;\n            padding-left: 2em;\n            list-style-type: decimal;\n          }\n          .editor-content ol[style*=\"lower-alpha\"] {\n            list-style-type: lower-alpha;\n          }\n          .editor-content li {\n            margin: 0.25em 0;\n          }\n        `}</style>\n        <div\n          ref={editorRef}\n          contentEditable\n          spellCheck={false}\n          onInput={handleChange}\n          suppressContentEditableWarning={true}\n          className=\"editor-content p-2 focus:outline-none h-full\"\n          style={{ \n            fontFamily: 'var(--dys-font-family)',\n            fontSize: 'var(--dys-font-size)',\n            lineHeight: 'var(--dys-line-height)',\n            color: 'var(--dys-text-color)',\n            backgroundColor: 'var(--dys-bg-color)',\n            overflow: 'auto',\n            wordWrap: 'break-word',\n            whiteSpace: 'pre-wrap',\n            border: '1px solid #e5e7eb'\n          }}\n        />\n      </div>\n    );\n  }\n\n  // Vue Markdown\n  if (viewMode === 'markdown') {\n    return (\n      <textarea\n        ref={(el) => {\n          editorRef.current = el;\n        }}\n        value={content}\n        onChange={(e) => {\n          onInput(e);\n        }}\n        className=\"w-full h-full p-2 focus:outline-none resize-none\"\n        style={{ \n          fontFamily: 'var(--dys-font-family)',\n          fontSize: 'var(--dys-font-size)',\n          lineHeight: 'var(--dys-line-height)',\n          color: 'var(--dys-text-color)',\n          backgroundColor: 'var(--dys-bg-color)',\n          overflow: 'auto',\n          wordWrap: 'break-word',\n          whiteSpace: 'pre-wrap',\n          border: '1px solid #e5e7eb'\n        }}\n        placeholder=\"Écrivez en Markdown...\n\n# Titre 1\n## Titre 2\n### Titre 3\n\n**Gras** *Italique*\n\n- Liste à puces\n1. Liste numérotée\na. Liste alphabétique\n\n$E = mc^2$ (formule inline)\n$$\\\\int_{-\\\\infty}^{\\\\infty} e^{-x^2} dx = \\\\sqrt{\\\\pi}$$ (formule block)\"\n      />\n    );\n  }\n\n  // Fonction pour formater le HTML avec des retours à la ligne et indentation\n  const formatHtmlForSource = (html) => {\n    let indentLevel = 0;\n    const indentSize = 2; // 2 espaces par niveau\n    \n    return html\n      .replace(/<br\\s*\\/?>/gi, '<br>\\n')\n      .replace(/<\\/?(h[1-6]|p|div|ul|ol|li|strong|em|span)[^>]*>/gi, (match) => {\n        if (match.startsWith('</')) {\n          // Balise fermante : diminuer l'indentation puis ajouter la balise\n          indentLevel = Math.max(0, indentLevel - 1);\n          return match + '\\n';\n        } else {\n          // Balise ouvrante : ajouter la balise puis augmenter l'indentation\n          const result = '\\n' + ' '.repeat(indentLevel * indentSize) + match;\n          // Augmenter l'indentation pour les balises conteneurs\n          if (match.match(/<(ul|ol|li|div|p|h[1-6])[^>]*>/i)) {\n            indentLevel++;\n          }\n          return result;\n        }\n      })\n      .split('\\n')\n      .map((line, index) => {\n        if (index === 0) return line.trim(); // Première ligne sans indentation\n        if (line.trim() === '') return ''; // Ligne vide\n        if (line.trim().startsWith('</')) {\n          // Balise fermante : réduire l'indentation\n          const currentIndent = Math.max(0, indentLevel - 1);\n          return ' '.repeat(currentIndent * indentSize) + line.trim();\n        }\n        // Contenu texte : utiliser l'indentation actuelle\n        return line.startsWith(' ') ? line : ' '.repeat(indentLevel * indentSize) + line.trim();\n      })\n      .join('\\n')\n      .replace(/^\\n+/, '') // Supprimer les retours à la ligne en début\n      .replace(/\\n{2,}/g, '\\n') // Supprimer toutes les lignes vides multiples\n      .trim();\n  };\n\n  // Vue HTML (par défaut)\n  return (\n    <textarea\n      ref={(el) => {\n        editorRef.current = el;\n      }}\n      value={formatHtmlForSource(content)}\n      onChange={(e) => {\n        onInput(e);\n      }}\n      className=\"w-full h-full p-2 focus:outline-none resize-none\"\n      style={{ \n        fontFamily: 'Monaco, \"Cascadia Code\", \"Roboto Mono\", monospace',\n        overflow: 'auto',\n        wordWrap: 'break-word',\n        whiteSpace: 'pre-wrap',\n        border: '1px solid #e5e7eb'\n      }}\n      placeholder=\"Code source HTML...\"\n    />\n  );\n};\n\nexport default Editor;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}