{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useCallback } from 'react';\n\n/**\n * Hook pour le stockage unifi√© dans IndexedDB\n * Remplace localStorage + IndexedDB s√©par√©s\n * Structure:\n * - Store \"documents\": contenu HTML, mode vue, m√©tadonn√©es\n * - Store \"images\": images binaires avec m√©tadonn√©es\n */\nconst useIndexedStorage = () => {\n  _s();\n  const [isInitialized, setIsInitialized] = useState(false);\n\n  // Configuration IndexedDB\n  const DB_NAME = 'EditorStorage';\n  const DB_VERSION = 1;\n  const DOCUMENT_STORE = 'documents';\n  const IMAGE_STORE = 'images';\n  const CURRENT_DOC_ID = 'current';\n\n  /**\n   * Initialiser la base de donn√©es IndexedDB\n   */\n  const initDB = useCallback(() => {\n    return new Promise((resolve, reject) => {\n      if (isInitialized) {\n        resolve();\n        return;\n      }\n      console.log('üîß Initialisation IndexedDB EditorStorage');\n      const request = indexedDB.open(DB_NAME, DB_VERSION);\n      request.onerror = () => {\n        console.error('‚ùå Erreur ouverture IndexedDB:', request.error);\n        reject(request.error);\n      };\n      request.onsuccess = () => {\n        console.log('‚úÖ IndexedDB EditorStorage initialis√©');\n        setIsInitialized(true);\n        resolve(request.result);\n      };\n      request.onupgradeneeded = event => {\n        const db = event.target.result;\n\n        // Cr√©er le store des documents si n√©cessaire\n        if (!db.objectStoreNames.contains(DOCUMENT_STORE)) {\n          console.log('üìÑ Cr√©ation store documents');\n          const documentStore = db.createObjectStore(DOCUMENT_STORE, {\n            keyPath: 'id'\n          });\n          documentStore.createIndex('lastModified', 'lastModified', {\n            unique: false\n          });\n        }\n\n        // Cr√©er le store des images si n√©cessaire  \n        if (!db.objectStoreNames.contains(IMAGE_STORE)) {\n          console.log('üñºÔ∏è Cr√©ation store images');\n          const imageStore = db.createObjectStore(IMAGE_STORE, {\n            keyPath: 'id'\n          });\n          imageStore.createIndex('fileName', 'fileName', {\n            unique: false\n          });\n          imageStore.createIndex('uploadDate', 'uploadDate', {\n            unique: false\n          });\n        }\n        console.log('üèóÔ∏è Sch√©ma IndexedDB cr√©√©/mis √† jour');\n      };\n    });\n  }, [isInitialized]);\n\n  /**\n   * Sauvegarder le document courant\n   */\n  const saveDocument = useCallback(async (htmlContent, viewMode = 'wysiwyg', metadata = {}) => {\n    try {\n      const db = await initDB();\n      const transaction = db.transaction([DOCUMENT_STORE], 'readwrite');\n      const store = transaction.objectStore(DOCUMENT_STORE);\n      const document = {\n        id: CURRENT_DOC_ID,\n        htmlContent,\n        viewMode,\n        lastModified: new Date().toISOString(),\n        wordCount: htmlContent.replace(/<[^>]*>/g, '').split(/\\s+/).filter(w => w.length > 0).length,\n        ...metadata\n      };\n      await new Promise((resolve, reject) => {\n        const request = store.put(document);\n        request.onsuccess = () => {\n          console.log('üíæ Document sauvegard√© dans IndexedDB');\n          resolve();\n        };\n        request.onerror = () => {\n          console.error('‚ùå Erreur sauvegarde document:', request.error);\n          reject(request.error);\n        };\n      });\n    } catch (error) {\n      console.error('‚ùå Erreur saveDocument:', error);\n      throw error;\n    }\n  }, [initDB]);\n\n  /**\n   * Charger le document courant\n   */\n  const loadDocument = useCallback(async () => {\n    try {\n      const db = await initDB();\n      const transaction = db.transaction([DOCUMENT_STORE], 'readonly');\n      const store = transaction.objectStore(DOCUMENT_STORE);\n      const document = await new Promise((resolve, reject) => {\n        const request = store.get(CURRENT_DOC_ID);\n        request.onsuccess = () => {\n          console.log('üì• Document charg√© depuis IndexedDB');\n          resolve(request.result);\n        };\n        request.onerror = () => {\n          console.error('‚ùå Erreur chargement document:', request.error);\n          reject(request.error);\n        };\n      });\n      return document || null;\n    } catch (error) {\n      console.error('‚ùå Erreur loadDocument:', error);\n      return null;\n    }\n  }, [initDB]);\n\n  /**\n   * Sauvegarder une image\n   */\n  const saveImage = useCallback(async (imageId, blob, fileName, mimeType) => {\n    try {\n      const db = await initDB();\n      const transaction = db.transaction([IMAGE_STORE], 'readwrite');\n      const store = transaction.objectStore(IMAGE_STORE);\n      const imageData = {\n        id: imageId,\n        blob,\n        fileName,\n        mimeType,\n        size: blob.size,\n        uploadDate: new Date().toISOString()\n      };\n      await new Promise((resolve, reject) => {\n        const request = store.put(imageData);\n        request.onsuccess = () => {\n          console.log('üñºÔ∏è Image sauvegard√©e:', imageId, fileName);\n          resolve();\n        };\n        request.onerror = () => {\n          console.error('‚ùå Erreur sauvegarde image:', request.error);\n          reject(request.error);\n        };\n      });\n    } catch (error) {\n      console.error('‚ùå Erreur saveImage:', error);\n      throw error;\n    }\n  }, [initDB]);\n\n  /**\n   * Charger une image par ID\n   */\n  const loadImage = useCallback(async imageId => {\n    try {\n      const db = await initDB();\n      const transaction = db.transaction([IMAGE_STORE], 'readonly');\n      const store = transaction.objectStore(IMAGE_STORE);\n      const imageData = await new Promise((resolve, reject) => {\n        const request = store.get(imageId);\n        request.onsuccess = () => {\n          resolve(request.result);\n        };\n        request.onerror = () => {\n          console.error('‚ùå Erreur chargement image:', request.error);\n          reject(request.error);\n        };\n      });\n      if (imageData) {\n        // Cr√©er l'URL blob pour l'affichage\n        const blobUrl = URL.createObjectURL(imageData.blob);\n        console.log('‚úÖ Image charg√©e et blob URL cr√©√©e:', imageId, '‚Üí', blobUrl);\n        return {\n          blobUrl,\n          fileName: imageData.fileName,\n          mimeType: imageData.mimeType,\n          size: imageData.size\n        };\n      }\n      return null;\n    } catch (error) {\n      console.error('‚ùå Erreur loadImage:', error);\n      return null;\n    }\n  }, [initDB]);\n\n  /**\n   * Convertir le contenu HTML: remplacer indexed:// par des blob: URLs\n   */\n  const convertContentForDisplay = useCallback(async htmlContent => {\n    if (!htmlContent || !htmlContent.includes('indexed://')) {\n      return htmlContent;\n    }\n    console.log('üîÑ Conversion indexed:// ‚Üí blob: URLs pour affichage');\n\n    // Parser le HTML\n    const tempDiv = document.createElement('div');\n    tempDiv.innerHTML = htmlContent;\n\n    // Trouver toutes les images indexed://\n    const images = tempDiv.querySelectorAll('img[src^=\"indexed://\"]');\n    for (const img of images) {\n      const indexedUrl = img.src;\n      const imageId = indexedUrl.replace('indexed://', '');\n      console.log('üîÑ Conversion:', imageId);\n      const imageData = await loadImage(imageId);\n      if (imageData) {\n        img.src = imageData.blobUrl;\n        // Ajouter les m√©tadonn√©es manquantes si n√©cessaire\n        if (!img.alt && imageData.fileName) {\n          img.alt = imageData.fileName;\n        }\n        console.log('‚úÖ Converti:', imageId, '‚Üí', imageData.blobUrl.substring(0, 50) + '...');\n      } else {\n        console.warn('‚ö†Ô∏è Image non trouv√©e pour:', imageId);\n      }\n    }\n    return tempDiv.innerHTML;\n  }, [loadImage]);\n\n  /**\n   * Lister toutes les images stock√©es\n   */\n  const listAllImages = useCallback(async () => {\n    try {\n      const db = await initDB();\n      const transaction = db.transaction([IMAGE_STORE], 'readonly');\n      const store = transaction.objectStore(IMAGE_STORE);\n      const images = await new Promise((resolve, reject) => {\n        const request = store.getAll();\n        request.onsuccess = () => {\n          resolve(request.result);\n        };\n        request.onerror = () => {\n          reject(request.error);\n        };\n      });\n      console.log('üìã Images disponibles:', images.length);\n      return images;\n    } catch (error) {\n      console.error('‚ùå Erreur listAllImages:', error);\n      return [];\n    }\n  }, [initDB]);\n  return {\n    // √âtats\n    isInitialized,\n    // M√©thodes document\n    saveDocument,\n    loadDocument,\n    // M√©thodes image\n    saveImage,\n    loadImage,\n    listAllImages,\n    // Utilitaires\n    convertContentForDisplay,\n    initDB\n  };\n};\n_s(useIndexedStorage, \"mfebkbyMN9PT6M7GHfA3U77vPIg=\");\nexport default useIndexedStorage;","map":{"version":3,"names":["useState","useCallback","useIndexedStorage","_s","isInitialized","setIsInitialized","DB_NAME","DB_VERSION","DOCUMENT_STORE","IMAGE_STORE","CURRENT_DOC_ID","initDB","Promise","resolve","reject","console","log","request","indexedDB","open","onerror","error","onsuccess","result","onupgradeneeded","event","db","target","objectStoreNames","contains","documentStore","createObjectStore","keyPath","createIndex","unique","imageStore","saveDocument","htmlContent","viewMode","metadata","transaction","store","objectStore","document","id","lastModified","Date","toISOString","wordCount","replace","split","filter","w","length","put","loadDocument","get","saveImage","imageId","blob","fileName","mimeType","imageData","size","uploadDate","loadImage","blobUrl","URL","createObjectURL","convertContentForDisplay","includes","tempDiv","createElement","innerHTML","images","querySelectorAll","img","indexedUrl","src","alt","substring","warn","listAllImages","getAll"],"sources":["C:/Users/JEAN-NOELLEFEBVRE-SA/CascadeProjects/editor/src/hooks/useIndexedStorage.js"],"sourcesContent":["import { useState, useCallback } from 'react';\n\n/**\n * Hook pour le stockage unifi√© dans IndexedDB\n * Remplace localStorage + IndexedDB s√©par√©s\n * Structure:\n * - Store \"documents\": contenu HTML, mode vue, m√©tadonn√©es\n * - Store \"images\": images binaires avec m√©tadonn√©es\n */\nconst useIndexedStorage = () => {\n  const [isInitialized, setIsInitialized] = useState(false);\n\n  // Configuration IndexedDB\n  const DB_NAME = 'EditorStorage';\n  const DB_VERSION = 1;\n  const DOCUMENT_STORE = 'documents';\n  const IMAGE_STORE = 'images';\n  const CURRENT_DOC_ID = 'current';\n\n  /**\n   * Initialiser la base de donn√©es IndexedDB\n   */\n  const initDB = useCallback(() => {\n    return new Promise((resolve, reject) => {\n      if (isInitialized) {\n        resolve();\n        return;\n      }\n\n      console.log('üîß Initialisation IndexedDB EditorStorage');\n      const request = indexedDB.open(DB_NAME, DB_VERSION);\n\n      request.onerror = () => {\n        console.error('‚ùå Erreur ouverture IndexedDB:', request.error);\n        reject(request.error);\n      };\n\n      request.onsuccess = () => {\n        console.log('‚úÖ IndexedDB EditorStorage initialis√©');\n        setIsInitialized(true);\n        resolve(request.result);\n      };\n\n      request.onupgradeneeded = (event) => {\n        const db = event.target.result;\n        \n        // Cr√©er le store des documents si n√©cessaire\n        if (!db.objectStoreNames.contains(DOCUMENT_STORE)) {\n          console.log('üìÑ Cr√©ation store documents');\n          const documentStore = db.createObjectStore(DOCUMENT_STORE, { keyPath: 'id' });\n          documentStore.createIndex('lastModified', 'lastModified', { unique: false });\n        }\n\n        // Cr√©er le store des images si n√©cessaire  \n        if (!db.objectStoreNames.contains(IMAGE_STORE)) {\n          console.log('üñºÔ∏è Cr√©ation store images');\n          const imageStore = db.createObjectStore(IMAGE_STORE, { keyPath: 'id' });\n          imageStore.createIndex('fileName', 'fileName', { unique: false });\n          imageStore.createIndex('uploadDate', 'uploadDate', { unique: false });\n        }\n\n        console.log('üèóÔ∏è Sch√©ma IndexedDB cr√©√©/mis √† jour');\n      };\n    });\n  }, [isInitialized]);\n\n  /**\n   * Sauvegarder le document courant\n   */\n  const saveDocument = useCallback(async (htmlContent, viewMode = 'wysiwyg', metadata = {}) => {\n    try {\n      const db = await initDB();\n      const transaction = db.transaction([DOCUMENT_STORE], 'readwrite');\n      const store = transaction.objectStore(DOCUMENT_STORE);\n\n      const document = {\n        id: CURRENT_DOC_ID,\n        htmlContent,\n        viewMode,\n        lastModified: new Date().toISOString(),\n        wordCount: htmlContent.replace(/<[^>]*>/g, '').split(/\\s+/).filter(w => w.length > 0).length,\n        ...metadata\n      };\n\n      await new Promise((resolve, reject) => {\n        const request = store.put(document);\n        request.onsuccess = () => {\n          console.log('üíæ Document sauvegard√© dans IndexedDB');\n          resolve();\n        };\n        request.onerror = () => {\n          console.error('‚ùå Erreur sauvegarde document:', request.error);\n          reject(request.error);\n        };\n      });\n\n    } catch (error) {\n      console.error('‚ùå Erreur saveDocument:', error);\n      throw error;\n    }\n  }, [initDB]);\n\n  /**\n   * Charger le document courant\n   */\n  const loadDocument = useCallback(async () => {\n    try {\n      const db = await initDB();\n      const transaction = db.transaction([DOCUMENT_STORE], 'readonly');\n      const store = transaction.objectStore(DOCUMENT_STORE);\n\n      const document = await new Promise((resolve, reject) => {\n        const request = store.get(CURRENT_DOC_ID);\n        request.onsuccess = () => {\n          console.log('üì• Document charg√© depuis IndexedDB');\n          resolve(request.result);\n        };\n        request.onerror = () => {\n          console.error('‚ùå Erreur chargement document:', request.error);\n          reject(request.error);\n        };\n      });\n\n      return document || null;\n\n    } catch (error) {\n      console.error('‚ùå Erreur loadDocument:', error);\n      return null;\n    }\n  }, [initDB]);\n\n  /**\n   * Sauvegarder une image\n   */\n  const saveImage = useCallback(async (imageId, blob, fileName, mimeType) => {\n    try {\n      const db = await initDB();\n      const transaction = db.transaction([IMAGE_STORE], 'readwrite');\n      const store = transaction.objectStore(IMAGE_STORE);\n\n      const imageData = {\n        id: imageId,\n        blob,\n        fileName,\n        mimeType,\n        size: blob.size,\n        uploadDate: new Date().toISOString()\n      };\n\n      await new Promise((resolve, reject) => {\n        const request = store.put(imageData);\n        request.onsuccess = () => {\n          console.log('üñºÔ∏è Image sauvegard√©e:', imageId, fileName);\n          resolve();\n        };\n        request.onerror = () => {\n          console.error('‚ùå Erreur sauvegarde image:', request.error);\n          reject(request.error);\n        };\n      });\n\n    } catch (error) {\n      console.error('‚ùå Erreur saveImage:', error);\n      throw error;\n    }\n  }, [initDB]);\n\n  /**\n   * Charger une image par ID\n   */\n  const loadImage = useCallback(async (imageId) => {\n    try {\n      const db = await initDB();\n      const transaction = db.transaction([IMAGE_STORE], 'readonly');\n      const store = transaction.objectStore(IMAGE_STORE);\n\n      const imageData = await new Promise((resolve, reject) => {\n        const request = store.get(imageId);\n        request.onsuccess = () => {\n          resolve(request.result);\n        };\n        request.onerror = () => {\n          console.error('‚ùå Erreur chargement image:', request.error);\n          reject(request.error);\n        };\n      });\n\n      if (imageData) {\n        // Cr√©er l'URL blob pour l'affichage\n        const blobUrl = URL.createObjectURL(imageData.blob);\n        console.log('‚úÖ Image charg√©e et blob URL cr√©√©e:', imageId, '‚Üí', blobUrl);\n        \n        return {\n          blobUrl,\n          fileName: imageData.fileName,\n          mimeType: imageData.mimeType,\n          size: imageData.size\n        };\n      }\n\n      return null;\n\n    } catch (error) {\n      console.error('‚ùå Erreur loadImage:', error);\n      return null;\n    }\n  }, [initDB]);\n\n  /**\n   * Convertir le contenu HTML: remplacer indexed:// par des blob: URLs\n   */\n  const convertContentForDisplay = useCallback(async (htmlContent) => {\n    if (!htmlContent || !htmlContent.includes('indexed://')) {\n      return htmlContent;\n    }\n\n    console.log('üîÑ Conversion indexed:// ‚Üí blob: URLs pour affichage');\n    \n    // Parser le HTML\n    const tempDiv = document.createElement('div');\n    tempDiv.innerHTML = htmlContent;\n    \n    // Trouver toutes les images indexed://\n    const images = tempDiv.querySelectorAll('img[src^=\"indexed://\"]');\n    \n    for (const img of images) {\n      const indexedUrl = img.src;\n      const imageId = indexedUrl.replace('indexed://', '');\n      \n      console.log('üîÑ Conversion:', imageId);\n      const imageData = await loadImage(imageId);\n      \n      if (imageData) {\n        img.src = imageData.blobUrl;\n        // Ajouter les m√©tadonn√©es manquantes si n√©cessaire\n        if (!img.alt && imageData.fileName) {\n          img.alt = imageData.fileName;\n        }\n        console.log('‚úÖ Converti:', imageId, '‚Üí', imageData.blobUrl.substring(0, 50) + '...');\n      } else {\n        console.warn('‚ö†Ô∏è Image non trouv√©e pour:', imageId);\n      }\n    }\n    \n    return tempDiv.innerHTML;\n  }, [loadImage]);\n\n  /**\n   * Lister toutes les images stock√©es\n   */\n  const listAllImages = useCallback(async () => {\n    try {\n      const db = await initDB();\n      const transaction = db.transaction([IMAGE_STORE], 'readonly');\n      const store = transaction.objectStore(IMAGE_STORE);\n\n      const images = await new Promise((resolve, reject) => {\n        const request = store.getAll();\n        request.onsuccess = () => {\n          resolve(request.result);\n        };\n        request.onerror = () => {\n          reject(request.error);\n        };\n      });\n\n      console.log('üìã Images disponibles:', images.length);\n      return images;\n\n    } catch (error) {\n      console.error('‚ùå Erreur listAllImages:', error);\n      return [];\n    }\n  }, [initDB]);\n\n  return {\n    // √âtats\n    isInitialized,\n    \n    // M√©thodes document\n    saveDocument,\n    loadDocument,\n    \n    // M√©thodes image\n    saveImage,\n    loadImage,\n    listAllImages,\n    \n    // Utilitaires\n    convertContentForDisplay,\n    initDB\n  };\n};\n\nexport default useIndexedStorage;\n"],"mappings":";AAAA,SAASA,QAAQ,EAAEC,WAAW,QAAQ,OAAO;;AAE7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAMC,iBAAiB,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAC9B,MAAM,CAACC,aAAa,EAAEC,gBAAgB,CAAC,GAAGL,QAAQ,CAAC,KAAK,CAAC;;EAEzD;EACA,MAAMM,OAAO,GAAG,eAAe;EAC/B,MAAMC,UAAU,GAAG,CAAC;EACpB,MAAMC,cAAc,GAAG,WAAW;EAClC,MAAMC,WAAW,GAAG,QAAQ;EAC5B,MAAMC,cAAc,GAAG,SAAS;;EAEhC;AACF;AACA;EACE,MAAMC,MAAM,GAAGV,WAAW,CAAC,MAAM;IAC/B,OAAO,IAAIW,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;MACtC,IAAIV,aAAa,EAAE;QACjBS,OAAO,CAAC,CAAC;QACT;MACF;MAEAE,OAAO,CAACC,GAAG,CAAC,2CAA2C,CAAC;MACxD,MAAMC,OAAO,GAAGC,SAAS,CAACC,IAAI,CAACb,OAAO,EAAEC,UAAU,CAAC;MAEnDU,OAAO,CAACG,OAAO,GAAG,MAAM;QACtBL,OAAO,CAACM,KAAK,CAAC,+BAA+B,EAAEJ,OAAO,CAACI,KAAK,CAAC;QAC7DP,MAAM,CAACG,OAAO,CAACI,KAAK,CAAC;MACvB,CAAC;MAEDJ,OAAO,CAACK,SAAS,GAAG,MAAM;QACxBP,OAAO,CAACC,GAAG,CAAC,sCAAsC,CAAC;QACnDX,gBAAgB,CAAC,IAAI,CAAC;QACtBQ,OAAO,CAACI,OAAO,CAACM,MAAM,CAAC;MACzB,CAAC;MAEDN,OAAO,CAACO,eAAe,GAAIC,KAAK,IAAK;QACnC,MAAMC,EAAE,GAAGD,KAAK,CAACE,MAAM,CAACJ,MAAM;;QAE9B;QACA,IAAI,CAACG,EAAE,CAACE,gBAAgB,CAACC,QAAQ,CAACrB,cAAc,CAAC,EAAE;UACjDO,OAAO,CAACC,GAAG,CAAC,6BAA6B,CAAC;UAC1C,MAAMc,aAAa,GAAGJ,EAAE,CAACK,iBAAiB,CAACvB,cAAc,EAAE;YAAEwB,OAAO,EAAE;UAAK,CAAC,CAAC;UAC7EF,aAAa,CAACG,WAAW,CAAC,cAAc,EAAE,cAAc,EAAE;YAAEC,MAAM,EAAE;UAAM,CAAC,CAAC;QAC9E;;QAEA;QACA,IAAI,CAACR,EAAE,CAACE,gBAAgB,CAACC,QAAQ,CAACpB,WAAW,CAAC,EAAE;UAC9CM,OAAO,CAACC,GAAG,CAAC,2BAA2B,CAAC;UACxC,MAAMmB,UAAU,GAAGT,EAAE,CAACK,iBAAiB,CAACtB,WAAW,EAAE;YAAEuB,OAAO,EAAE;UAAK,CAAC,CAAC;UACvEG,UAAU,CAACF,WAAW,CAAC,UAAU,EAAE,UAAU,EAAE;YAAEC,MAAM,EAAE;UAAM,CAAC,CAAC;UACjEC,UAAU,CAACF,WAAW,CAAC,YAAY,EAAE,YAAY,EAAE;YAAEC,MAAM,EAAE;UAAM,CAAC,CAAC;QACvE;QAEAnB,OAAO,CAACC,GAAG,CAAC,sCAAsC,CAAC;MACrD,CAAC;IACH,CAAC,CAAC;EACJ,CAAC,EAAE,CAACZ,aAAa,CAAC,CAAC;;EAEnB;AACF;AACA;EACE,MAAMgC,YAAY,GAAGnC,WAAW,CAAC,OAAOoC,WAAW,EAAEC,QAAQ,GAAG,SAAS,EAAEC,QAAQ,GAAG,CAAC,CAAC,KAAK;IAC3F,IAAI;MACF,MAAMb,EAAE,GAAG,MAAMf,MAAM,CAAC,CAAC;MACzB,MAAM6B,WAAW,GAAGd,EAAE,CAACc,WAAW,CAAC,CAAChC,cAAc,CAAC,EAAE,WAAW,CAAC;MACjE,MAAMiC,KAAK,GAAGD,WAAW,CAACE,WAAW,CAAClC,cAAc,CAAC;MAErD,MAAMmC,QAAQ,GAAG;QACfC,EAAE,EAAElC,cAAc;QAClB2B,WAAW;QACXC,QAAQ;QACRO,YAAY,EAAE,IAAIC,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC;QACtCC,SAAS,EAAEX,WAAW,CAACY,OAAO,CAAC,UAAU,EAAE,EAAE,CAAC,CAACC,KAAK,CAAC,KAAK,CAAC,CAACC,MAAM,CAACC,CAAC,IAAIA,CAAC,CAACC,MAAM,GAAG,CAAC,CAAC,CAACA,MAAM;QAC5F,GAAGd;MACL,CAAC;MAED,MAAM,IAAI3B,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;QACrC,MAAMG,OAAO,GAAGwB,KAAK,CAACa,GAAG,CAACX,QAAQ,CAAC;QACnC1B,OAAO,CAACK,SAAS,GAAG,MAAM;UACxBP,OAAO,CAACC,GAAG,CAAC,uCAAuC,CAAC;UACpDH,OAAO,CAAC,CAAC;QACX,CAAC;QACDI,OAAO,CAACG,OAAO,GAAG,MAAM;UACtBL,OAAO,CAACM,KAAK,CAAC,+BAA+B,EAAEJ,OAAO,CAACI,KAAK,CAAC;UAC7DP,MAAM,CAACG,OAAO,CAACI,KAAK,CAAC;QACvB,CAAC;MACH,CAAC,CAAC;IAEJ,CAAC,CAAC,OAAOA,KAAK,EAAE;MACdN,OAAO,CAACM,KAAK,CAAC,wBAAwB,EAAEA,KAAK,CAAC;MAC9C,MAAMA,KAAK;IACb;EACF,CAAC,EAAE,CAACV,MAAM,CAAC,CAAC;;EAEZ;AACF;AACA;EACE,MAAM4C,YAAY,GAAGtD,WAAW,CAAC,YAAY;IAC3C,IAAI;MACF,MAAMyB,EAAE,GAAG,MAAMf,MAAM,CAAC,CAAC;MACzB,MAAM6B,WAAW,GAAGd,EAAE,CAACc,WAAW,CAAC,CAAChC,cAAc,CAAC,EAAE,UAAU,CAAC;MAChE,MAAMiC,KAAK,GAAGD,WAAW,CAACE,WAAW,CAAClC,cAAc,CAAC;MAErD,MAAMmC,QAAQ,GAAG,MAAM,IAAI/B,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;QACtD,MAAMG,OAAO,GAAGwB,KAAK,CAACe,GAAG,CAAC9C,cAAc,CAAC;QACzCO,OAAO,CAACK,SAAS,GAAG,MAAM;UACxBP,OAAO,CAACC,GAAG,CAAC,qCAAqC,CAAC;UAClDH,OAAO,CAACI,OAAO,CAACM,MAAM,CAAC;QACzB,CAAC;QACDN,OAAO,CAACG,OAAO,GAAG,MAAM;UACtBL,OAAO,CAACM,KAAK,CAAC,+BAA+B,EAAEJ,OAAO,CAACI,KAAK,CAAC;UAC7DP,MAAM,CAACG,OAAO,CAACI,KAAK,CAAC;QACvB,CAAC;MACH,CAAC,CAAC;MAEF,OAAOsB,QAAQ,IAAI,IAAI;IAEzB,CAAC,CAAC,OAAOtB,KAAK,EAAE;MACdN,OAAO,CAACM,KAAK,CAAC,wBAAwB,EAAEA,KAAK,CAAC;MAC9C,OAAO,IAAI;IACb;EACF,CAAC,EAAE,CAACV,MAAM,CAAC,CAAC;;EAEZ;AACF;AACA;EACE,MAAM8C,SAAS,GAAGxD,WAAW,CAAC,OAAOyD,OAAO,EAAEC,IAAI,EAAEC,QAAQ,EAAEC,QAAQ,KAAK;IACzE,IAAI;MACF,MAAMnC,EAAE,GAAG,MAAMf,MAAM,CAAC,CAAC;MACzB,MAAM6B,WAAW,GAAGd,EAAE,CAACc,WAAW,CAAC,CAAC/B,WAAW,CAAC,EAAE,WAAW,CAAC;MAC9D,MAAMgC,KAAK,GAAGD,WAAW,CAACE,WAAW,CAACjC,WAAW,CAAC;MAElD,MAAMqD,SAAS,GAAG;QAChBlB,EAAE,EAAEc,OAAO;QACXC,IAAI;QACJC,QAAQ;QACRC,QAAQ;QACRE,IAAI,EAAEJ,IAAI,CAACI,IAAI;QACfC,UAAU,EAAE,IAAIlB,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC;MACrC,CAAC;MAED,MAAM,IAAInC,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;QACrC,MAAMG,OAAO,GAAGwB,KAAK,CAACa,GAAG,CAACQ,SAAS,CAAC;QACpC7C,OAAO,CAACK,SAAS,GAAG,MAAM;UACxBP,OAAO,CAACC,GAAG,CAAC,wBAAwB,EAAE0C,OAAO,EAAEE,QAAQ,CAAC;UACxD/C,OAAO,CAAC,CAAC;QACX,CAAC;QACDI,OAAO,CAACG,OAAO,GAAG,MAAM;UACtBL,OAAO,CAACM,KAAK,CAAC,4BAA4B,EAAEJ,OAAO,CAACI,KAAK,CAAC;UAC1DP,MAAM,CAACG,OAAO,CAACI,KAAK,CAAC;QACvB,CAAC;MACH,CAAC,CAAC;IAEJ,CAAC,CAAC,OAAOA,KAAK,EAAE;MACdN,OAAO,CAACM,KAAK,CAAC,qBAAqB,EAAEA,KAAK,CAAC;MAC3C,MAAMA,KAAK;IACb;EACF,CAAC,EAAE,CAACV,MAAM,CAAC,CAAC;;EAEZ;AACF;AACA;EACE,MAAMsD,SAAS,GAAGhE,WAAW,CAAC,MAAOyD,OAAO,IAAK;IAC/C,IAAI;MACF,MAAMhC,EAAE,GAAG,MAAMf,MAAM,CAAC,CAAC;MACzB,MAAM6B,WAAW,GAAGd,EAAE,CAACc,WAAW,CAAC,CAAC/B,WAAW,CAAC,EAAE,UAAU,CAAC;MAC7D,MAAMgC,KAAK,GAAGD,WAAW,CAACE,WAAW,CAACjC,WAAW,CAAC;MAElD,MAAMqD,SAAS,GAAG,MAAM,IAAIlD,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;QACvD,MAAMG,OAAO,GAAGwB,KAAK,CAACe,GAAG,CAACE,OAAO,CAAC;QAClCzC,OAAO,CAACK,SAAS,GAAG,MAAM;UACxBT,OAAO,CAACI,OAAO,CAACM,MAAM,CAAC;QACzB,CAAC;QACDN,OAAO,CAACG,OAAO,GAAG,MAAM;UACtBL,OAAO,CAACM,KAAK,CAAC,4BAA4B,EAAEJ,OAAO,CAACI,KAAK,CAAC;UAC1DP,MAAM,CAACG,OAAO,CAACI,KAAK,CAAC;QACvB,CAAC;MACH,CAAC,CAAC;MAEF,IAAIyC,SAAS,EAAE;QACb;QACA,MAAMI,OAAO,GAAGC,GAAG,CAACC,eAAe,CAACN,SAAS,CAACH,IAAI,CAAC;QACnD5C,OAAO,CAACC,GAAG,CAAC,oCAAoC,EAAE0C,OAAO,EAAE,GAAG,EAAEQ,OAAO,CAAC;QAExE,OAAO;UACLA,OAAO;UACPN,QAAQ,EAAEE,SAAS,CAACF,QAAQ;UAC5BC,QAAQ,EAAEC,SAAS,CAACD,QAAQ;UAC5BE,IAAI,EAAED,SAAS,CAACC;QAClB,CAAC;MACH;MAEA,OAAO,IAAI;IAEb,CAAC,CAAC,OAAO1C,KAAK,EAAE;MACdN,OAAO,CAACM,KAAK,CAAC,qBAAqB,EAAEA,KAAK,CAAC;MAC3C,OAAO,IAAI;IACb;EACF,CAAC,EAAE,CAACV,MAAM,CAAC,CAAC;;EAEZ;AACF;AACA;EACE,MAAM0D,wBAAwB,GAAGpE,WAAW,CAAC,MAAOoC,WAAW,IAAK;IAClE,IAAI,CAACA,WAAW,IAAI,CAACA,WAAW,CAACiC,QAAQ,CAAC,YAAY,CAAC,EAAE;MACvD,OAAOjC,WAAW;IACpB;IAEAtB,OAAO,CAACC,GAAG,CAAC,sDAAsD,CAAC;;IAEnE;IACA,MAAMuD,OAAO,GAAG5B,QAAQ,CAAC6B,aAAa,CAAC,KAAK,CAAC;IAC7CD,OAAO,CAACE,SAAS,GAAGpC,WAAW;;IAE/B;IACA,MAAMqC,MAAM,GAAGH,OAAO,CAACI,gBAAgB,CAAC,wBAAwB,CAAC;IAEjE,KAAK,MAAMC,GAAG,IAAIF,MAAM,EAAE;MACxB,MAAMG,UAAU,GAAGD,GAAG,CAACE,GAAG;MAC1B,MAAMpB,OAAO,GAAGmB,UAAU,CAAC5B,OAAO,CAAC,YAAY,EAAE,EAAE,CAAC;MAEpDlC,OAAO,CAACC,GAAG,CAAC,gBAAgB,EAAE0C,OAAO,CAAC;MACtC,MAAMI,SAAS,GAAG,MAAMG,SAAS,CAACP,OAAO,CAAC;MAE1C,IAAII,SAAS,EAAE;QACbc,GAAG,CAACE,GAAG,GAAGhB,SAAS,CAACI,OAAO;QAC3B;QACA,IAAI,CAACU,GAAG,CAACG,GAAG,IAAIjB,SAAS,CAACF,QAAQ,EAAE;UAClCgB,GAAG,CAACG,GAAG,GAAGjB,SAAS,CAACF,QAAQ;QAC9B;QACA7C,OAAO,CAACC,GAAG,CAAC,aAAa,EAAE0C,OAAO,EAAE,GAAG,EAAEI,SAAS,CAACI,OAAO,CAACc,SAAS,CAAC,CAAC,EAAE,EAAE,CAAC,GAAG,KAAK,CAAC;MACtF,CAAC,MAAM;QACLjE,OAAO,CAACkE,IAAI,CAAC,4BAA4B,EAAEvB,OAAO,CAAC;MACrD;IACF;IAEA,OAAOa,OAAO,CAACE,SAAS;EAC1B,CAAC,EAAE,CAACR,SAAS,CAAC,CAAC;;EAEf;AACF;AACA;EACE,MAAMiB,aAAa,GAAGjF,WAAW,CAAC,YAAY;IAC5C,IAAI;MACF,MAAMyB,EAAE,GAAG,MAAMf,MAAM,CAAC,CAAC;MACzB,MAAM6B,WAAW,GAAGd,EAAE,CAACc,WAAW,CAAC,CAAC/B,WAAW,CAAC,EAAE,UAAU,CAAC;MAC7D,MAAMgC,KAAK,GAAGD,WAAW,CAACE,WAAW,CAACjC,WAAW,CAAC;MAElD,MAAMiE,MAAM,GAAG,MAAM,IAAI9D,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;QACpD,MAAMG,OAAO,GAAGwB,KAAK,CAAC0C,MAAM,CAAC,CAAC;QAC9BlE,OAAO,CAACK,SAAS,GAAG,MAAM;UACxBT,OAAO,CAACI,OAAO,CAACM,MAAM,CAAC;QACzB,CAAC;QACDN,OAAO,CAACG,OAAO,GAAG,MAAM;UACtBN,MAAM,CAACG,OAAO,CAACI,KAAK,CAAC;QACvB,CAAC;MACH,CAAC,CAAC;MAEFN,OAAO,CAACC,GAAG,CAAC,wBAAwB,EAAE0D,MAAM,CAACrB,MAAM,CAAC;MACpD,OAAOqB,MAAM;IAEf,CAAC,CAAC,OAAOrD,KAAK,EAAE;MACdN,OAAO,CAACM,KAAK,CAAC,yBAAyB,EAAEA,KAAK,CAAC;MAC/C,OAAO,EAAE;IACX;EACF,CAAC,EAAE,CAACV,MAAM,CAAC,CAAC;EAEZ,OAAO;IACL;IACAP,aAAa;IAEb;IACAgC,YAAY;IACZmB,YAAY;IAEZ;IACAE,SAAS;IACTQ,SAAS;IACTiB,aAAa;IAEb;IACAb,wBAAwB;IACxB1D;EACF,CAAC;AACH,CAAC;AAACR,EAAA,CA3RID,iBAAiB;AA6RvB,eAAeA,iBAAiB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}