{"ast":null,"code":"import _objectSpread from\"C:/Users/JEAN-NOELLEFEBVRE-SA/CascadeProjects/editor/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{useState,useRef,useCallback,useEffect}from'react';import{htmlToMarkdown,markdownToHtml}from'../utils/markdownConverter';export const useEditor=()=>{// V√©rifier d'abord s'il y a une sauvegarde de refresh\nconst getInitialContent=()=>{console.log('üîç [useEditor] V√©rification sauvegarde refresh...');try{const refreshData=localStorage.getItem('editor-refresh-backup');console.log('üì¶ [useEditor] Donn√©es refresh trouv√©es:',refreshData?'OUI':'NON');if(refreshData){var _parsed$content;const parsed=JSON.parse(refreshData);const timeDiff=Date.now()-parsed.timestamp;console.log('‚è±Ô∏è [useEditor] Temps √©coul√© depuis sauvegarde:',timeDiff,'ms');console.log('üìÑ [useEditor] Contenu sauvegard√©:',((_parsed$content=parsed.content)===null||_parsed$content===void 0?void 0:_parsed$content.substring(0,100))+'...');// Restaurer toujours si contenu disponible (persistance infinie)\nif(parsed.content){console.log('‚úÖ [useEditor] Restauration du contenu sauvegard√©!');return parsed.content;}else{console.log('‚ùå [useEditor] Pas de contenu sauvegard√©');}}}catch(error){console.error('‚ùå [useEditor] Erreur lors de la restauration du contenu:',error);}// Contenu par d√©faut si pas de sauvegarde r√©cente\nconsole.log('üìù [useEditor] Utilisation du contenu par d√©faut');return'<p>Bienvenue dans votre √©diteur WYSIWYG</p><p>Commencez √† √©crire votre <strong>document</strong> ici.</p><p>Le contenu est automatiquement sauvegard√©.</p>';};const[content,setContent]=useState(getInitialContent());// Remplacer isWysiwyg par viewMode avec 3 options\nconst[viewMode,setViewMode]=useState(()=>{console.log('üîç [useEditor] V√©rification mode view pour refresh...');try{const refreshData=localStorage.getItem('editor-refresh-backup');if(refreshData){const parsed=JSON.parse(refreshData);const timeDiff=Date.now()-parsed.timestamp;console.log('‚è±Ô∏è [useEditor] Mode - Temps √©coul√©:',timeDiff,'ms');console.log('üëÅÔ∏è [useEditor] Mode sauvegard√©:',parsed.viewMode);// Restaurer toujours le mode si disponible (persistance infinie)\nif(parsed.viewMode){console.log('‚úÖ [useEditor] Restauration du mode:',parsed.viewMode);// Ne pas supprimer ici - laisser un d√©lai pour √©viter le double appel\nsetTimeout(()=>{console.log('üóëÔ∏è [useEditor] Nettoyage de la sauvegarde refresh');localStorage.removeItem('editor-refresh-backup');},1000);return parsed.viewMode;}}}catch(error){console.error('‚ùå [useEditor] Erreur lors de la restauration du mode:',error);}// Force le mode 'wysiwyg' par d√©faut - toujours d√©marrer en mode visuel\nconsole.log('üìù [useEditor] Utilisation du mode par d√©faut: wysiwyg');return'wysiwyg';});const[currentFormat,setCurrentFormat]=useState(()=>{// R√©cup√©rer la police sauvegard√©e depuis localStorage\nconst savedFont=localStorage.getItem('editor-font')||'system-ui, -apple-system, sans-serif';return{bold:false,italic:false,color:'#000000',fontSize:'16px',fontFamily:savedFont,heading:null,list:null};});// √âtat pour g√©rer l'image s√©lectionn√©e\nconst[selectedImage,setSelectedImage]=useState(null);// M√©moriser le dernier formatage appliqu√© pour les d√©buts de ligne\nconst lastAppliedFormatRef=useRef(null);const editorRef=useRef(null);const selectionRef=useRef(null);const ignoreSelectionChangeRef=useRef(false);// Sauvegarder la s√©lection\nconst saveSelection=useCallback(()=>{if(window.getSelection&&editorRef.current){const selection=window.getSelection();if(selection.rangeCount>0){selectionRef.current=selection.getRangeAt(0).cloneRange();}}},[]);// Restaurer la s√©lection\nconst restoreSelection=useCallback(()=>{if(selectionRef.current&&editorRef.current){const selection=window.getSelection();selection.removeAllRanges();selection.addRange(selectionRef.current);editorRef.current.focus();}},[]);// D√©tecter l'√©tat de formatage √† la position du curseur\nconst updateCurrentFormat=useCallback(()=>{if(!editorRef.current)return;const selection=window.getSelection();if(!selection.rangeCount)return;const range=selection.getRangeAt(0);let element=range.startContainer;// Si c'est un n≈ìud texte, prendre le parent\nif(element.nodeType===Node.TEXT_NODE){element=element.parentElement;}// Si pas d'√©l√©ment ou curseur en d√©but de ligne, utiliser l'√©tat m√©moris√©\nif(!element||element===editorRef.current){if(lastAppliedFormatRef.current){setCurrentFormat(lastAppliedFormatRef.current);return;}}// Si on vient d'appliquer un formatage Normal, le pr√©server\nif(lastAppliedFormatRef.current&&lastAppliedFormatRef.current.heading===null&&lastAppliedFormatRef.current.bold===false&&lastAppliedFormatRef.current.italic===false){setCurrentFormat(lastAppliedFormatRef.current);return;}// Parcourir vers le haut pour trouver les styles\nlet currentElement=element;const newFormat={bold:false,italic:false,color:'#000000',fontSize:'16px',fontFamily:'system-ui',heading:null,list:null};while(currentElement&&currentElement!==editorRef.current){var _currentElement$tagNa,_currentElement$style,_currentElement$style2;const computedStyle=window.getComputedStyle(currentElement);const tagName=(_currentElement$tagNa=currentElement.tagName)===null||_currentElement$tagNa===void 0?void 0:_currentElement$tagNa.toLowerCase();// V√©rifier les balises de formatage\nif(tagName==='strong'||tagName==='b'||computedStyle.fontWeight==='bold'||parseInt(computedStyle.fontWeight)>=700){newFormat.bold=true;}if(tagName==='em'||tagName==='i'||computedStyle.fontStyle==='italic'){newFormat.italic=true;}if(tagName!==null&&tagName!==void 0&&tagName.match(/^h[1-6]$/)){newFormat.heading=tagName;}if(tagName==='li'){// Trouver le parent ul ou ol\nlet listParent=currentElement.parentElement;while(listParent&&!['ul','ol'].includes((_listParent$tagName=listParent.tagName)===null||_listParent$tagName===void 0?void 0:_listParent$tagName.toLowerCase())){var _listParent$tagName;listParent=listParent.parentElement;}if(listParent){const parentTag=listParent.tagName.toLowerCase();const listStyle=listParent.style.listStyleType;if(parentTag==='ul'){newFormat.list=listStyle==='lower-alpha'?'letter':'bullet';}else if(parentTag==='ol'){newFormat.list=listStyle==='lower-alpha'?'letter':'number';}}}if(tagName==='ul'){const listStyle=currentElement.style.listStyleType;newFormat.list=listStyle==='lower-alpha'?'letter':'bullet';}if(tagName==='ol'){const listStyle=currentElement.style.listStyleType;newFormat.list=listStyle==='lower-alpha'?'letter':'number';}// V√©rifier les styles inline et computed\nif((_currentElement$style=currentElement.style)!==null&&_currentElement$style!==void 0&&_currentElement$style.color){newFormat.color=currentElement.style.color;}else if(computedStyle.color&&computedStyle.color!=='rgb(0, 0, 0)'){newFormat.color=computedStyle.color;}if((_currentElement$style2=currentElement.style)!==null&&_currentElement$style2!==void 0&&_currentElement$style2.fontSize){newFormat.fontSize=currentElement.style.fontSize;}currentElement=currentElement.parentElement;}// Convertir rgb en hex si n√©cessaire\nif(newFormat.color.startsWith('rgb')){newFormat.color=rgbToHex(newFormat.color);}setCurrentFormat(newFormat);},[]);// Convertir RGB en HEX\nconst rgbToHex=rgb=>{const result=rgb.match(/\\d+/g);if(!result||result.length<3)return'#000000';const r=parseInt(result[0]);const g=parseInt(result[1]);const b=parseInt(result[2]);return\"#\".concat(((1<<24)+(r<<16)+(g<<8)+b).toString(16).slice(1));};// G√©rer les changements de contenu\nconst handleInput=useCallback(e=>{if(viewMode==='wysiwyg'){setContent(e.target.innerHTML);// Laisser selectionchange g√©rer la synchronisation\n}else{setContent(e.target.value);}},[viewMode]);// G√©rer les changements de s√©lection\nconst handleSelectionChange=useCallback(()=>{console.log('üéØ HANDLESELECTIONCHANGE appel√© - ignoreFlag:',ignoreSelectionChangeRef.current);if(ignoreSelectionChangeRef.current){console.log('‚ùå selectionchange IGNORED - flag active');return;}if(viewMode==='wysiwyg'&&document.activeElement===editorRef.current){console.log('‚úÖ selectionchange PROCESSING - va appeler updateCurrentFormat');updateCurrentFormat();saveSelection();console.log('üîÑ updateCurrentFormat et saveSelection appel√©s');}else{console.log('‚ö†Ô∏è selectionchange SKIP - viewMode:',viewMode,'activeElement:',document.activeElement===editorRef.current);}},[viewMode,updateCurrentFormat,saveSelection]);// Fonction pour changer de vue avec conversion automatique\nconst changeViewMode=useCallback(newMode=>{if(newMode===viewMode)return;let newContent=content;// Conversions entre les vues\nif(viewMode==='wysiwyg'&&newMode==='markdown'){newContent=htmlToMarkdown(content);}else if(viewMode==='markdown'&&newMode==='wysiwyg'){newContent=markdownToHtml(content);}else if(viewMode==='html'&&newMode==='markdown'){newContent=htmlToMarkdown(content);}else if(viewMode==='markdown'&&newMode==='html'){newContent=markdownToHtml(content);}// wysiwyg -> html : nettoyer les data-attributes\nif(viewMode==='wysiwyg'&&newMode==='html'){newContent=content.replace(/ data-type=\"[^\"]*\"/g,'').replace(/ data-number=\"[^\"]*\"/g,'').replace(/ data-letter=\"[^\"]*\"/g,'');}// html -> wysiwyg : pas de conversion n√©cessaire\nsetContent(newContent);setViewMode(newMode);},[viewMode,content]);// √âcouter les changements de s√©lection\nuseEffect(()=>{document.addEventListener('selectionchange',handleSelectionChange);return()=>{document.removeEventListener('selectionchange',handleSelectionChange);};},[handleSelectionChange]);// Sauvegarder la police s√©lectionn√©e dans localStorage\nuseEffect(()=>{if(currentFormat.fontFamily){localStorage.setItem('editor-font',currentFormat.fontFamily);}},[currentFormat.fontFamily]);// Fonction pour sauvegarder l'√©tat appliqu√©\nconst saveAppliedFormat=useCallback(format=>{lastAppliedFormatRef.current=_objectSpread({},format);},[]);// Gestionnaire pour s√©lectionner une image\nconst handleImageClick=useCallback(imageElement=>{if(viewMode==='wysiwyg'){setSelectedImage(imageElement);// D√©selectionner le texte pour √©viter les conflits\nwindow.getSelection().removeAllRanges();}},[viewMode]);// Gestionnaire pour d√©s√©lectionner l'image si clic ailleurs\nconst handleEditorClick=useCallback(e=>{if(viewMode==='wysiwyg'&&selectedImage){// Si le clic n'est pas sur l'image s√©lectionn√©e, la d√©s√©lectionner\nif(e.target!==selectedImage&&!selectedImage.contains(e.target)){setSelectedImage(null);}}},[viewMode,selectedImage]);return{content,setContent,viewMode,setViewMode,changeViewMode,// Compatibilit√© avec l'ancien syst√®me\nisWysiwyg:viewMode==='wysiwyg',setIsWysiwyg:value=>changeViewMode(value?'wysiwyg':'html'),currentFormat,setCurrentFormat,editorRef,handleInput,saveSelection,restoreSelection,updateCurrentFormat,saveAppliedFormat,ignoreSelectionChangeRef,// Gestion de s√©lection d'images\nselectedImage,setSelectedImage,handleImageClick,handleEditorClick};};","map":{"version":3,"names":["useState","useRef","useCallback","useEffect","htmlToMarkdown","markdownToHtml","useEditor","getInitialContent","console","log","refreshData","localStorage","getItem","_parsed$content","parsed","JSON","parse","timeDiff","Date","now","timestamp","content","substring","error","setContent","viewMode","setViewMode","setTimeout","removeItem","currentFormat","setCurrentFormat","savedFont","bold","italic","color","fontSize","fontFamily","heading","list","selectedImage","setSelectedImage","lastAppliedFormatRef","editorRef","selectionRef","ignoreSelectionChangeRef","saveSelection","window","getSelection","current","selection","rangeCount","getRangeAt","cloneRange","restoreSelection","removeAllRanges","addRange","focus","updateCurrentFormat","range","element","startContainer","nodeType","Node","TEXT_NODE","parentElement","currentElement","newFormat","_currentElement$tagNa","_currentElement$style","_currentElement$style2","computedStyle","getComputedStyle","tagName","toLowerCase","fontWeight","parseInt","fontStyle","match","listParent","includes","_listParent$tagName","parentTag","listStyle","style","listStyleType","startsWith","rgbToHex","rgb","result","length","r","g","b","concat","toString","slice","handleInput","e","target","innerHTML","value","handleSelectionChange","document","activeElement","changeViewMode","newMode","newContent","replace","addEventListener","removeEventListener","setItem","saveAppliedFormat","format","_objectSpread","handleImageClick","imageElement","handleEditorClick","contains","isWysiwyg","setIsWysiwyg"],"sources":["C:/Users/JEAN-NOELLEFEBVRE-SA/CascadeProjects/editor/src/hooks/useEditor.js"],"sourcesContent":["import { useState, useRef, useCallback, useEffect } from 'react';\nimport { htmlToMarkdown, markdownToHtml } from '../utils/markdownConverter';\n\nexport const useEditor = () => {\n  // V√©rifier d'abord s'il y a une sauvegarde de refresh\n  const getInitialContent = () => {\n    console.log('üîç [useEditor] V√©rification sauvegarde refresh...');\n    try {\n      const refreshData = localStorage.getItem('editor-refresh-backup');\n      console.log('üì¶ [useEditor] Donn√©es refresh trouv√©es:', refreshData ? 'OUI' : 'NON');\n      \n      if (refreshData) {\n        const parsed = JSON.parse(refreshData);\n        const timeDiff = Date.now() - parsed.timestamp;\n        console.log('‚è±Ô∏è [useEditor] Temps √©coul√© depuis sauvegarde:', timeDiff, 'ms');\n        console.log('üìÑ [useEditor] Contenu sauvegard√©:', parsed.content?.substring(0, 100) + '...');\n        \n        // Restaurer toujours si contenu disponible (persistance infinie)\n        if (parsed.content) {\n          console.log('‚úÖ [useEditor] Restauration du contenu sauvegard√©!');\n          return parsed.content;\n        } else {\n          console.log('‚ùå [useEditor] Pas de contenu sauvegard√©');\n        }\n      }\n    } catch (error) {\n      console.error('‚ùå [useEditor] Erreur lors de la restauration du contenu:', error);\n    }\n    \n    // Contenu par d√©faut si pas de sauvegarde r√©cente\n    console.log('üìù [useEditor] Utilisation du contenu par d√©faut');\n    return '<p>Bienvenue dans votre √©diteur WYSIWYG</p><p>Commencez √† √©crire votre <strong>document</strong> ici.</p><p>Le contenu est automatiquement sauvegard√©.</p>';\n  };\n\n  const [content, setContent] = useState(getInitialContent());\n  \n  // Remplacer isWysiwyg par viewMode avec 3 options\n  const [viewMode, setViewMode] = useState(() => {\n    console.log('üîç [useEditor] V√©rification mode view pour refresh...');\n    try {\n      const refreshData = localStorage.getItem('editor-refresh-backup');\n      if (refreshData) {\n        const parsed = JSON.parse(refreshData);\n        const timeDiff = Date.now() - parsed.timestamp;\n        console.log('‚è±Ô∏è [useEditor] Mode - Temps √©coul√©:', timeDiff, 'ms');\n        console.log('üëÅÔ∏è [useEditor] Mode sauvegard√©:', parsed.viewMode);\n        \n        // Restaurer toujours le mode si disponible (persistance infinie)\n        if (parsed.viewMode) {\n          console.log('‚úÖ [useEditor] Restauration du mode:', parsed.viewMode);\n          // Ne pas supprimer ici - laisser un d√©lai pour √©viter le double appel\n          setTimeout(() => {\n            console.log('üóëÔ∏è [useEditor] Nettoyage de la sauvegarde refresh');\n            localStorage.removeItem('editor-refresh-backup');\n          }, 1000);\n          return parsed.viewMode;\n        }\n      }\n    } catch (error) {\n      console.error('‚ùå [useEditor] Erreur lors de la restauration du mode:', error);\n    }\n    \n    // Force le mode 'wysiwyg' par d√©faut - toujours d√©marrer en mode visuel\n    console.log('üìù [useEditor] Utilisation du mode par d√©faut: wysiwyg');\n    return 'wysiwyg';\n  });\n  \n  const [currentFormat, setCurrentFormat] = useState(() => {\n    // R√©cup√©rer la police sauvegard√©e depuis localStorage\n    const savedFont = localStorage.getItem('editor-font') || 'system-ui, -apple-system, sans-serif';\n    return {\n      bold: false,\n      italic: false,\n      color: '#000000',\n      fontSize: '16px',\n      fontFamily: savedFont,\n      heading: null,\n      list: null\n    };\n  });\n\n  // √âtat pour g√©rer l'image s√©lectionn√©e\n  const [selectedImage, setSelectedImage] = useState(null);\n\n  // M√©moriser le dernier formatage appliqu√© pour les d√©buts de ligne\n  const lastAppliedFormatRef = useRef(null);\n  \n  const editorRef = useRef(null);\n  const selectionRef = useRef(null);\n  const ignoreSelectionChangeRef = useRef(false);\n\n  // Sauvegarder la s√©lection\n  const saveSelection = useCallback(() => {\n    if (window.getSelection && editorRef.current) {\n      const selection = window.getSelection();\n      if (selection.rangeCount > 0) {\n        selectionRef.current = selection.getRangeAt(0).cloneRange();\n      }\n    }\n  }, []);\n\n  // Restaurer la s√©lection\n  const restoreSelection = useCallback(() => {\n    if (selectionRef.current && editorRef.current) {\n      const selection = window.getSelection();\n      selection.removeAllRanges();\n      selection.addRange(selectionRef.current);\n      editorRef.current.focus();\n    }\n  }, []);\n\n  // D√©tecter l'√©tat de formatage √† la position du curseur\n  const updateCurrentFormat = useCallback(() => {\n    if (!editorRef.current) return;\n\n    const selection = window.getSelection();\n    if (!selection.rangeCount) return;\n\n    const range = selection.getRangeAt(0);\n    let element = range.startContainer;\n\n    // Si c'est un n≈ìud texte, prendre le parent\n    if (element.nodeType === Node.TEXT_NODE) {\n      element = element.parentElement;\n    }\n\n    // Si pas d'√©l√©ment ou curseur en d√©but de ligne, utiliser l'√©tat m√©moris√©\n    if (!element || element === editorRef.current) {\n      if (lastAppliedFormatRef.current) {\n        setCurrentFormat(lastAppliedFormatRef.current);\n        return;\n      }\n    }\n\n    // Si on vient d'appliquer un formatage Normal, le pr√©server\n    if (lastAppliedFormatRef.current && \n        lastAppliedFormatRef.current.heading === null && \n        lastAppliedFormatRef.current.bold === false &&\n        lastAppliedFormatRef.current.italic === false) {\n      setCurrentFormat(lastAppliedFormatRef.current);\n      return;\n    }\n\n    // Parcourir vers le haut pour trouver les styles\n    let currentElement = element;\n    const newFormat = {\n      bold: false,\n      italic: false,\n      color: '#000000',\n      fontSize: '16px',\n      fontFamily: 'system-ui',\n      heading: null,\n      list: null\n    };\n\n    while (currentElement && currentElement !== editorRef.current) {\n      const computedStyle = window.getComputedStyle(currentElement);\n      const tagName = currentElement.tagName?.toLowerCase();\n\n\n      // V√©rifier les balises de formatage\n      if (tagName === 'strong' || tagName === 'b' || computedStyle.fontWeight === 'bold' || parseInt(computedStyle.fontWeight) >= 700) {\n        newFormat.bold = true;\n      }\n      if (tagName === 'em' || tagName === 'i' || computedStyle.fontStyle === 'italic') {\n        newFormat.italic = true;\n      }\n      if (tagName?.match(/^h[1-6]$/)) {\n        newFormat.heading = tagName;\n      }\n      if (tagName === 'li') {\n        // Trouver le parent ul ou ol\n        let listParent = currentElement.parentElement;\n        while (listParent && !['ul', 'ol'].includes(listParent.tagName?.toLowerCase())) {\n          listParent = listParent.parentElement;\n        }\n        if (listParent) {\n          const parentTag = listParent.tagName.toLowerCase();\n          const listStyle = listParent.style.listStyleType;\n          if (parentTag === 'ul') {\n            newFormat.list = listStyle === 'lower-alpha' ? 'letter' : 'bullet';\n          } else if (parentTag === 'ol') {\n            newFormat.list = listStyle === 'lower-alpha' ? 'letter' : 'number';\n          }\n        }\n      }\n      if (tagName === 'ul') {\n        const listStyle = currentElement.style.listStyleType;\n        newFormat.list = listStyle === 'lower-alpha' ? 'letter' : 'bullet';\n      }\n      if (tagName === 'ol') {\n        const listStyle = currentElement.style.listStyleType;\n        newFormat.list = listStyle === 'lower-alpha' ? 'letter' : 'number';\n      }\n\n      // V√©rifier les styles inline et computed\n      if (currentElement.style?.color) {\n        newFormat.color = currentElement.style.color;\n      } else if (computedStyle.color && computedStyle.color !== 'rgb(0, 0, 0)') {\n        newFormat.color = computedStyle.color;\n      }\n      if (currentElement.style?.fontSize) {\n        newFormat.fontSize = currentElement.style.fontSize;\n      }\n\n      currentElement = currentElement.parentElement;\n    }\n\n    // Convertir rgb en hex si n√©cessaire\n    if (newFormat.color.startsWith('rgb')) {\n      newFormat.color = rgbToHex(newFormat.color);\n    }\n\n    setCurrentFormat(newFormat);\n  }, []);\n\n  // Convertir RGB en HEX\n  const rgbToHex = (rgb) => {\n    const result = rgb.match(/\\d+/g);\n    if (!result || result.length < 3) return '#000000';\n    \n    const r = parseInt(result[0]);\n    const g = parseInt(result[1]);\n    const b = parseInt(result[2]);\n    \n    return `#${((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1)}`;\n  };\n\n  // G√©rer les changements de contenu\n  const handleInput = useCallback((e) => {\n    if (viewMode === 'wysiwyg') {\n      setContent(e.target.innerHTML);\n      // Laisser selectionchange g√©rer la synchronisation\n    } else {\n      setContent(e.target.value);\n    }\n  }, [viewMode]);\n\n  // G√©rer les changements de s√©lection\n  const handleSelectionChange = useCallback(() => {\n    console.log('üéØ HANDLESELECTIONCHANGE appel√© - ignoreFlag:', ignoreSelectionChangeRef.current);\n    if (ignoreSelectionChangeRef.current) {\n      console.log('‚ùå selectionchange IGNORED - flag active');\n      return;\n    }\n    if (viewMode === 'wysiwyg' && document.activeElement === editorRef.current) {\n      console.log('‚úÖ selectionchange PROCESSING - va appeler updateCurrentFormat');\n      updateCurrentFormat();\n      saveSelection();\n      console.log('üîÑ updateCurrentFormat et saveSelection appel√©s');\n    } else {\n      console.log('‚ö†Ô∏è selectionchange SKIP - viewMode:', viewMode, 'activeElement:', document.activeElement === editorRef.current);\n    }\n  }, [viewMode, updateCurrentFormat, saveSelection]);\n\n  // Fonction pour changer de vue avec conversion automatique\n  const changeViewMode = useCallback((newMode) => {\n    if (newMode === viewMode) return;\n    \n    let newContent = content;\n    \n    // Conversions entre les vues\n    if (viewMode === 'wysiwyg' && newMode === 'markdown') {\n      newContent = htmlToMarkdown(content);\n    } else if (viewMode === 'markdown' && newMode === 'wysiwyg') {\n      newContent = markdownToHtml(content);\n    } else if (viewMode === 'html' && newMode === 'markdown') {\n      newContent = htmlToMarkdown(content);\n    } else if (viewMode === 'markdown' && newMode === 'html') {\n      newContent = markdownToHtml(content);\n    }\n    // wysiwyg -> html : nettoyer les data-attributes\n    if (viewMode === 'wysiwyg' && newMode === 'html') {\n      newContent = content.replace(/ data-type=\"[^\"]*\"/g, '')\n                         .replace(/ data-number=\"[^\"]*\"/g, '')\n                         .replace(/ data-letter=\"[^\"]*\"/g, '');\n    }\n    // html -> wysiwyg : pas de conversion n√©cessaire\n    \n    setContent(newContent);\n    setViewMode(newMode);\n  }, [viewMode, content]);\n\n  // √âcouter les changements de s√©lection\n  useEffect(() => {\n    document.addEventListener('selectionchange', handleSelectionChange);\n    return () => {\n      document.removeEventListener('selectionchange', handleSelectionChange);\n    };\n  }, [handleSelectionChange]);\n\n  // Sauvegarder la police s√©lectionn√©e dans localStorage\n  useEffect(() => {\n    if (currentFormat.fontFamily) {\n      localStorage.setItem('editor-font', currentFormat.fontFamily);\n    }\n  }, [currentFormat.fontFamily]);\n\n  // Fonction pour sauvegarder l'√©tat appliqu√©\n  const saveAppliedFormat = useCallback((format) => {\n    lastAppliedFormatRef.current = { ...format };\n  }, []);\n\n  // Gestionnaire pour s√©lectionner une image\n  const handleImageClick = useCallback((imageElement) => {\n    if (viewMode === 'wysiwyg') {\n      setSelectedImage(imageElement);\n      // D√©selectionner le texte pour √©viter les conflits\n      window.getSelection().removeAllRanges();\n    }\n  }, [viewMode]);\n\n  // Gestionnaire pour d√©s√©lectionner l'image si clic ailleurs\n  const handleEditorClick = useCallback((e) => {\n    if (viewMode === 'wysiwyg' && selectedImage) {\n      // Si le clic n'est pas sur l'image s√©lectionn√©e, la d√©s√©lectionner\n      if (e.target !== selectedImage && !selectedImage.contains(e.target)) {\n        setSelectedImage(null);\n      }\n    }\n  }, [viewMode, selectedImage]);\n\n\n  return {\n    content,\n    setContent,\n    viewMode,\n    setViewMode,\n    changeViewMode,\n    // Compatibilit√© avec l'ancien syst√®me\n    isWysiwyg: viewMode === 'wysiwyg',\n    setIsWysiwyg: (value) => changeViewMode(value ? 'wysiwyg' : 'html'),\n    currentFormat,\n    setCurrentFormat,\n    editorRef,\n    handleInput,\n    saveSelection,\n    restoreSelection,\n    updateCurrentFormat,\n    saveAppliedFormat,\n    ignoreSelectionChangeRef,\n    // Gestion de s√©lection d'images\n    selectedImage,\n    setSelectedImage,\n    handleImageClick,\n    handleEditorClick\n  };\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}